"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e5) { throw _e5; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e6) { didErr = true; err = _e6; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
var html = document.querySelector("html");
var modals,
  modalOpenButs,
  handleModalOpen,
  handleModalClose,
  modalSetTimeout,
  openedModal,
  header,
  reviewImagesSliderConfig,
  openVideo,
  MODAL_TIME = 400,
  changeCurrentSlideFromClick = {};
var defaultFractionPag = function defaultFractionPag(e) {
  return {
    el: e,
    type: "fraction",
    formatFractionCurrent: function formatFractionCurrent(e) {
      return ("0" + e).slice(-2);
    },
    formatFractionTotal: function formatFractionTotal(e) {
      return ("0" + e).slice(-2);
    },
    renderFraction: function renderFraction(e, t) {
      return "<span class=\"".concat(e, " text-text-d px-[4.5px]\"></span><span>|</span><span class=\"").concat(t, " text-text-at px-[4.5px]\"></span>");
    }
  };
};
function loadScript(e, t) {
  var o = document.createElement("script");
  o.type = "text/javascript", o.async = !0, o.defer = !0, o.readyState ? o.onreadystatechange = function () {
    "loaded" !== o.readyState && "complete" !== o.readyState || (o.onreadystatechange = null, t());
  } : o.onload = function () {
    t();
  }, o.src = e, document.getElementsByTagName("head")[0].appendChild(o);
}
var documentHeight = function documentHeight() {
  document.documentElement.style.setProperty("--doc-height", window.innerHeight + "px");
};
function ajaxForm(e, t) {
  e && e.addEventListener("submit", function (o) {
    o.preventDefault();
    var n = e.querySelectorAll(".input");
    if (!function () {
      if (!e.querySelector(".checkbox").checked) return !1;
      function t(e, t) {
        var o = document.createElement("div"),
          n = document.createTextNode(t);
        o.classList.add("input__errortext"), o.appendChild(n), e.appendChild(o);
      }
      return _toConsumableArray(n).forEach(function (e) {
        if (e.querySelector("input") && "file" !== e.querySelector("input").type) {
          var _o = e.querySelector("input");
          e.classList.remove("error"), e.querySelector(".input__errortext") && e.querySelector(".input__errortext").remove(), _o.value.length > 0 ? _o.classList.contains("phone") && 16 !== _o.value.length && (e.classList.add("error"), t(e, "Телефон введен неверно")) : (e.classList.add("error"), t(e, "Поле должно быть заполнено"));
        }
      }), !e.querySelector(".error");
    }()) return !1;
    e.getElementsByClassName("error-msg")[0].innerHTML = "";
    var s = new XMLHttpRequest();
    s.open("POST", t), s.onload = function () {
      if (200 != s.status) alert("\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD ".concat(s.status, ": ").concat(s.statusText));else {
        var t = JSON.parse(s.responseText);
        if (t.success) e.closest(".modal") ? e.closest(".modal").classList.add("success") : (handleModalOpen("formSuccess"), _toConsumableArray(n).forEach(function (e) {
          e.querySelector("input").value = "";
        }));else {
          var _o2 = "";
          for (var _e in t.errors) _o2 += t.errors[_e] + "<br>";
          e.getElementsByClassName("error-msg")[0].innerHTML = _o2;
        }
      }
    }, s.onerror = function () {
      alert("������ �� ������");
    }, s.send(new FormData(e));
  });
}
function ChangeDoc(e) {
  for (var t = document.getElementsByClassName("DOCTOR_NAME"), o = 0; o < t.length; ++o) {
    t[o].value = e;
  }
}
function ChangeService(e) {
  for (var t = document.getElementsByClassName("SERVICE_NAME"), o = 0; o < t.length; ++o) {
    t[o].value = e;
  }
}
function ChangeClinic(e) {
  for (var t = document.getElementsByClassName("CLINIC_NAME"), o = 0; o < t.length; ++o) {
    t[o].value = e;
  }
}
documentHeight(), window.addEventListener("resize", documentHeight), document.addEventListener("DOMContentLoaded", function () {
  var _JSON$parse;
  modals = document.querySelectorAll(".modal"), modalOpenButs = document.querySelectorAll("[data-modal]");
  var e = document.querySelectorAll(".modal-close");
  handleModalOpen = function handleModalOpen(e, t) {
    clearTimeout(modalSetTimeout), openedModal = document.getElementById(e), modals.forEach(function (t) {
      t.id === e && (t.classList.add("mounted"), t.classList.add("opened"));
    }), html.classList.add("something-opened"), t && (void 0 !== t.dataset.modalEnablescroll && html.classList.remove("something-opened"), t.classList.add("modal-opened"), "mobileNav" === e && document.querySelectorAll('[data-modal="mobileNav"]').forEach(function (e) {
      return e.classList.add("modal-opened");
    }), t.dataset.modalName && openedModal.querySelector(".modal-form-title") && (openedModal.querySelector(".modal-form-title").innerHTML = t.dataset.modalName));
  }, handleModalClose = function handleModalClose(e, t, o) {
    var n = openedModal;
    openedModal = void 0, n.classList.remove("opened"), modalOpenButs.forEach(function (e) {
      e.dataset.modal === n.id && e.classList.remove("modal-opened");
    }), modalSetTimeout = setTimeout(function () {
      html.classList.remove("something-opened"), n.classList.remove("mounted"), e && e(t, o);
    }, MODAL_TIME);
  }, _toConsumableArray(e).forEach(function (e) {
    e.addEventListener("click", function (e) {
      e.preventDefault(), handleModalClose();
    });
  }), modals.forEach(function (e) {
    e.addEventListener("click", function () {
      handleModalClose();
    }), e.querySelector(".modal__container") && e.querySelector(".modal__container").addEventListener("click", function (e) {
      e.stopPropagation();
    });
  }), modalOpenButs.forEach(function (e) {
    e.addEventListener("click", function (t) {
      t.preventDefault(), e.classList.contains("modal-opened") ? handleModalClose() : openedModal ? handleModalClose(handleModalOpen, e.dataset.modal, e) : handleModalOpen(e.dataset.modal, e);
    });
  });
  var t = _toConsumableArray(document.querySelectorAll(".accardeon"));
  t.forEach(function (e) {
    var t = e.querySelectorAll(":scope > .accardeon-item");
    _toConsumableArray(t).forEach(function (o) {
      o.querySelector(".accardeon-item__but").addEventListener("click", function (n) {
        n.stopPropagation(), e.classList.add("sm-opened"), o.classList.contains("opened") ? (o.classList.remove("opened"), e.classList.remove("sm-opened")) : (t.forEach(function (e) {
          e.classList.remove("opened");
        }), o.classList.add("opened"));
      });
    }), e.addEventListener("click", function (e) {
      e.stopPropagation();
    });
  }), document.addEventListener("click", function () {
    t.forEach(function (e) {
      if (!e.classList.contains("static-list")) {
        _toConsumableArray(e.querySelectorAll(":scope > .accardeon-item")).forEach(function (e) {
          e.classList.remove("opened");
        }), e.classList.remove("sm-opened");
      }
    });
  });
  var o = document.querySelector(".header__top");
  var n = window.scrollY;
  function s() {
    n >= o.clientHeight ? html.classList.contains("header-close") || html.classList.add("header-close") : html.classList.contains("header-close") && html.classList.remove("header-close");
  }
  s(), document.addEventListener("scroll", function () {
    n = window.scrollY, s();
  }), reviewImagesSliderConfig = function reviewImagesSliderConfig(e) {
    return new Swiper(e.querySelector(".swiper"), {
      slidesPerView: "auto",
      spaceBetween: 12,
      touchMoveStopPropagation: !0,
      navigation: {
        nextEl: e.querySelector(".review-slider__button.next"),
        prevEl: e.querySelector(".review-slider__button.before")
      }
    });
  };
  document.querySelectorAll(".review-slider").forEach(function (e) {
    reviewImagesSliderConfig(e);
  });
  _toConsumableArray(document.querySelectorAll(".swiper-container")).forEach(function (e) {
    var _t$sliderSb, _t$sliderSpv, _t$sliderEffect, _t$sliderMdSpv, _t$sliderMdSb, _t$sliderXlSpv, _t$sliderXlSb;
    var t = e.querySelector(".swiper").dataset,
      o = new Swiper(e.querySelector(".swiper"), {
        spaceBetween: (_t$sliderSb = t.sliderSb) !== null && _t$sliderSb !== void 0 ? _t$sliderSb : 16,
        slidesPerView: (_t$sliderSpv = t.sliderSpv) !== null && _t$sliderSpv !== void 0 ? _t$sliderSpv : "auto",
        pagination: defaultFractionPag(e.querySelector(".swiper-controls .pagination")),
        autoHeight: "false" !== t.sliderAh,
        effect: (_t$sliderEffect = t.sliderEffect) !== null && _t$sliderEffect !== void 0 ? _t$sliderEffect : void 0,
        onAny: function onAny(e) {
          "paginationUpdate" !== e && "afterInit" !== e || this.pagination.el && (this.pagination.el.classList.contains("swiper-pagination-lock") ? this.el.closest(".swiper-container").classList.add("remove-pagination") : this.el.closest(".swiper-container").classList.remove("remove-pagination"));
        },
        navigation: !t.removeNativeControls && {
          prevEl: e.querySelector(".swiper-controls .prev"),
          nextEl: e.querySelector(".swiper-controls .next")
        },
        breakpoints: {
          768: {
            slidesPerView: (_t$sliderMdSpv = t.sliderMdSpv) !== null && _t$sliderMdSpv !== void 0 ? _t$sliderMdSpv : 2,
            spaceBetween: (_t$sliderMdSb = t.sliderMdSb) !== null && _t$sliderMdSb !== void 0 ? _t$sliderMdSb : 16
          },
          1294: {
            slidesPerView: (_t$sliderXlSpv = t.sliderXlSpv) !== null && _t$sliderXlSpv !== void 0 ? _t$sliderXlSpv : 3,
            spaceBetween: (_t$sliderXlSb = t.sliderXlSb) !== null && _t$sliderXlSb !== void 0 ? _t$sliderXlSb : 30
          }
        }
      });
    if (e.classList.contains("swiper-with-count")) {
      e.querySelectorAll(".swiper-slide").forEach(function (e, t) {
        e.innerHTML += "<span class=\"absolute right-5 top-5 text-bg-white\" style='font-size: 38px; font-weight: 700; line-height: 42px; letter-spacing: 0.02em;' >".concat(t > 9 ? t + 1 : "0" + (t + 1), "</span>");
      });
    }
    t.sliderCanChangeFromDoc && (changeCurrentSlideFromClick[e.getAttribute("id")] = function (e) {
      o.slideTo(e);
    });
  });
  _toConsumableArray(document.querySelectorAll(".sst")).forEach(function (e) {
    var t = e.querySelectorAll(".sst-tabs > *"),
      o = e.querySelectorAll(".sst-slides > *");
    t[0].classList.add("selected"), o[0].classList.add("selected"), _toConsumableArray(t).forEach(function (e, n) {
      e.addEventListener("click", function (e) {
        e.preventDefault();
        for (var _e2 = 0; _e2 < t.length; _e2++) t[_e2].classList.remove("selected"), o[_e2].classList.remove("selected");
        this.classList.add("selected"), o[n].classList.add("selected");
      });
    });
  });
  document.querySelectorAll(".navigation-on-site").forEach(function (e) {
    var t = e.querySelectorAll(".navigation-on-site__el");
    function o() {
      t.forEach(function (e) {
        e.classList.remove("opened");
      });
    }
    t.forEach(function (e) {
      var t = e.querySelector(".navigation-on-site__but"),
        n = e.querySelector(".navigation-on-site__body__heading__close");
      t.querySelector("a").addEventListener("click", function (e) {
        e.preventDefault();
      }), t.addEventListener("click", function () {
        e.classList.contains("opened") ? e.classList.remove("opened") : (o(), e.classList.add("opened"));
      }), n && n.addEventListener("click", function () {
        o();
      });
    });
  }), _toConsumableArray(document.querySelectorAll(".local-header-services-search")).forEach(function (e) {
    var t = e.querySelector(".local-header-services-search__form"),
      o = e.querySelector(".local-header-services-search__input"),
      n = _toConsumableArray(e.querySelectorAll(".navigation-on-site__body__list a")),
      s = e.querySelector(".local-header-services-search__result");
    t.addEventListener("submit", function (e) {
      e.preventDefault();
      var t = _toConsumableArray(n.filter(function (e) {
        return e.innerText.toLowerCase().includes(o.value.toLowerCase());
      }));
      t.length > 0 ? (s.innerHTML = "", t.forEach(function (e) {
        s.appendChild(e.cloneNode(!0));
      })) : s.innerHTML = '<span class="text-body1 text-el-it">Ничего не найдено</span>';
    });
  });
  var l = document.querySelectorAll(".tabs");
  var _iterator = _createForOfIteratorHelper(l),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _e4 = _step.value;
      _e4.style.gridTemplateColumns = "repeat(".concat(_e4.querySelectorAll(".tab").length, ", minmax(0, 1fr))");
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  (function () {
    var e, t, o, n, s, l, a, r, c, i;
    var _loop = function _loop() {
      var n = e[t].getElementsByTagName("select")[0];
      var u = n.hasAttribute("multiple");
      for (s = n.length, (l = document.createElement("DIV")).setAttribute("class", "select-selected"), (c = document.createElement("SPAN")).innerHTML = n.options[n.selectedIndex] ? n.options[n.selectedIndex].innerHTML : "Выбрать...", e[t].appendChild(l), l.appendChild(c), c.outerHTML += '<svg width=\'24px\' height="24px" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.96967 8.96967C4.26256 8.67678 4.73744 8.67678 5.03033 8.96967L12 15.9393L18.9697 8.96967C19.2626 8.67678 19.7374 8.67678 20.0303 8.96967C20.3232 9.26256 20.3232 9.73744 20.0303 10.0303L12.5303 17.5303C12.2374 17.8232 11.7626 17.8232 11.4697 17.5303L3.96967 10.0303C3.67678 9.73744 3.67678 9.26256 3.96967 8.96967Z"/></svg>', a = document.createElement("DIV"), i = document.createElement("DIV"), a.setAttribute("class", "select-items select-hide"), i.setAttribute("class", "select-items__items"), o = 0; o < s; o++) (r = document.createElement("DIV")).innerHTML = n.options[o].innerHTML, o === n.selectedIndex && r.setAttribute("class", "same-as-selected"), r.addEventListener("click", function (e) {
        var t, o, n, s, l, a, r;
        for (e.stopPropagation(), a = (s = this.parentNode.parentNode.parentNode.getElementsByTagName("select")[0]).length, l = this.parentNode.parentNode.previousSibling.querySelector("span"), o = 0; o < a; o++) if (s.options[o].innerHTML == this.innerHTML) {
          if (u) {
            for (s.options[o].selected ? (s.options[o].selected = !1, this.removeAttribute("class", "same-as-selected")) : (s.options[o].selected = !0, this.setAttribute("class", "same-as-selected")), l.innerHTML = "", t = 0; t < a; t++) s.options[t].selected && (l.innerHTML.length > 0 ? l.innerHTML = l.innerHTML + ", " + s.options[t].innerHTML : l.innerHTML = "" + s.options[t].innerHTML);
            l.innerHTML.length < 1 && (l.innerHTML = "Выбрать...");
            break;
          }
          for (s.selectedIndex = o, l.innerHTML = this.innerHTML, r = (t = this.parentNode.getElementsByClassName("same-as-selected")).length, n = 0; n < r; n++) t[n].removeAttribute("class");
          this.setAttribute("class", "same-as-selected");
          break;
        }
        this.closest(".off-submit") || u || this.closest("form").submit(), u || l.click();
      }), i.appendChild(r);
      e[t].appendChild(a), a.appendChild(i), l.addEventListener("click", function (e) {
        e.stopPropagation(), d(this), this.nextSibling.classList.toggle("select-hide"), this.classList.toggle("select-arrow-active");
      }), e[t].addEventListener("click", function (e) {
        e.stopPropagation();
      });
    };
    for (n = (e = document.getElementsByClassName("custom-select")).length, t = 0; t < n; t++) {
      _loop();
    }
    function d(e) {
      var t,
        o,
        n,
        s,
        l,
        a = [];
      for (t = document.getElementsByClassName("select-items"), o = document.getElementsByClassName("select-selected"), s = t.length, l = o.length, n = 0; n < l; n++) e == o[n] ? a.push(n) : o[n].classList.remove("select-arrow-active");
      for (n = 0; n < s; n++) a.indexOf(n) && t[n].classList.add("select-hide");
    }
    document.addEventListener("click", d);
  })();
  var a = document.querySelectorAll("[data-scrollto]"),
    r = document.querySelector(".header");
  a.forEach(function (e) {
    var t = e.dataset.scrollto;
    t && e.addEventListener("click", function (e) {
      e.preventDefault();
      var o = -r.clientHeight,
        n = document.getElementById(t).getBoundingClientRect().top + window.scrollY + o;
      window.scrollTo({
        top: n,
        behavior: "smooth"
      });
    });
  });
  _toConsumableArray(document.querySelectorAll(".phone")).forEach(function (e) {
    IMask(e, {
      mask: "+{7}(000)000-00-00"
    });
  }), openVideo = function openVideo(e) {
    var t = e;
    t.includes("/video/") && (t = t.replace("/video/", "/play/embed/"));
    document.getElementById("videoIframe").setAttribute("src", t), Fancybox.show([{
      src: "#videoIframe"
    }]);
  }, Fancybox.bind("[data-fancybox]", {
    contentClick: "toggleCover",
    Images: {
      Panzoom: {
        panMode: "mousemove",
        mouseMoveFactor: 1.1,
        mouseMoveFriction: .12
      }
    }
  });
  var c = document.querySelectorAll(".search-on-site-header"),
    i = document.querySelectorAll(".search-on-site-header input"),
    d = (_JSON$parse = JSON.parse(localStorage.getItem("searchHistory"))) !== null && _JSON$parse !== void 0 ? _JSON$parse : [],
    u = document.getElementById("searchOnSiteInputHeader"),
    m = document.getElementById("headerClearHistorySearch"),
    p = document.getElementById("historySearch");
  for (var _e3 = d.length - 1; _e3 > d.length - 6; _e3--) if (_e3 >= 0) {
    var _t = document.createElement("button");
    _t.innerText = d[_e3], p.appendChild(_t);
  }
  _toConsumableArray(c).forEach(function (e, t) {
    e.addEventListener("submit", function () {
      i[t].value && (d.push(i[t].value), localStorage.setItem("searchHistory", JSON.stringify(d)));
    });
  }), m && m.addEventListener("click", function () {
    d.splice(0, d.length), localStorage.removeItem("searchHistory"), p.innerHTML = "";
  });
  _toConsumableArray(document.querySelectorAll(".insert-in-search > *")).forEach(function (e) {
    e.addEventListener("click", function () {
      u.value = e.innerHTML;
    });
  });
  var h = document.querySelectorAll(".btn-share"),
    v = window.location.href,
    f = document.title;
  _toConsumableArray(h).forEach(function (e) {
    navigator.share ? e.addEventListener("click", function () {
      navigator.share({
        title: f,
        url: v
      }).then(function () {
        console.log("Thanks for sharing!");
      })["catch"](console.error);
    }) : (e.remove(), console.log("Web Share API не поддерживается"));
  });
  _toConsumableArray(document.querySelectorAll(".CLINIC_NAME")).forEach(function (e) {
    v.includes("/solncevo/") ? e.value = "Солнцево" : v.includes("/podolsk/") ? e.value = "Подольск" : v.includes("/mytishchi/") && (e.value = "Мытищи");
  });
});